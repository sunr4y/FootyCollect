{% load static %}
{% load i18n %}

<div class="card h-100 item-card">
  <!-- Header with logos -->
  <div class="card-header d-flex justify-content-between align-items-center bg-light">
    <!-- Brand logo -->
    {% if item.base_item.brand.logo %}
      <img src="{{ item.base_item.brand.logo }}"
           alt="{{ item.base_item.brand.name }}"
           class="item-logo" />
    {% else %}
      <div class="item-logo-placeholder">
        <i class="bi bi-tag"></i>
      </div>
    {% endif %}
    <!-- Club crest -->
    {% if item.base_item.club.crest %}
      <img src="{{ item.base_item.club.crest }}"
           alt="{{ item.base_item.club.name }}"
           class="item-crest" />
    {% else %}
      <div class="item-crest-placeholder">
        <i class="bi bi-shield"></i>
      </div>
    {% endif %}
    <!-- Country flag -->
    {% if item.base_item.country %}
      <img src="https://flagcdn.com/16x12/{{ item.base_item.country.code|lower }}.png"
           alt="{{ item.base_item.country.name }}"
           class="item-flag" />
    {% else %}
      <div class="item-flag-placeholder">
        <i class="bi bi-flag"></i>
      </div>
    {% endif %}
  </div>
  <!-- Main photo -->
  <div class="item-photo-container">
    {% if item.base_item.photos.exists %}
      <img src="{{ item.base_item.photos.first.get_image_url }}"
           class="card-img-top item-photo"
           alt="{{ item.base_item.name }}" />
    {% else %}
      <div class="card-img-top item-photo d-flex align-items-center justify-content-center bg-light">
        <i class="bi bi-image text-muted item-placeholder-icon"></i>
      </div>
    {% endif %}
  </div>
  <!-- Card body -->
  <div class="card-body d-flex flex-column">
    <!-- Title -->
    <h5 class="card-title">{{ item.base_item.name }}</h5>
    <!-- Kit type badges -->
    {% if item.jersey.kit and item.jersey.kit.type %}
      <div class="mb-2">
        {% if item.jersey.kit.type.category != "match" %}
          <span class="badge bg-primary me-1">{{ item.jersey.kit.type.get_category_display_name }}</span>
        {% endif %}
        {% if item.jersey.kit.type.is_goalkeeper %}<span class="badge bg-warning text-dark me-1">GK</span>{% endif %}
        <span class="badge bg-secondary">{{ item.jersey.kit.type.name }}</span>
      </div>
    {% endif %}
    <!-- Club name -->
    {% if item.base_item.club %}<p class="card-text text-muted mb-1">{{ item.base_item.club.name }}</p>{% endif %}
    <!-- Brand name -->
    {% if item.base_item.brand %}<p class="card-text text-muted mb-1">{{ item.base_item.brand.name }}</p>{% endif %}
    <!-- Season -->
    {% if item.base_item.season %}<p class="card-text text-muted mb-3">{{ item.base_item.season.year }}</p>{% endif %}
    <!-- Action buttons -->
    <div class="mt-auto">
      <div class="btn-group w-100" role="group">
        <a href="{% url 'collection:item_detail' item.pk %}"
           class="btn btn-primary btn-sm">
          <i class="bi bi-eye"></i> {% trans "View Details" %}
        </a>
        <a href="{% url 'collection:item_update' item.pk %}"
           class="btn btn-outline-secondary btn-sm">
          <i class="bi bi-pencil"></i> {% trans "Edit" %}
        </a>
      </div>
    </div>
  </div>
</div>
<style>
  .item-card {
    border: 1px solid #dee2e6;
    border-radius: 0.375rem;
    transition: transform 0.2s ease-in-out;
  }

  .item-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .item-logo,
  .item-crest,
  .item-flag {
    max-height: 30px;
    max-width: 40px;
    object-fit: contain;
  }

  .item-logo-placeholder,
  .item-crest-placeholder,
  .item-flag-placeholder {
    height: 30px;
    width: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f8f9fa;
    border-radius: 4px;
    color: #6c757d;
  }

  .item-photo-container {
    height: 200px;
    overflow: hidden;
  }

  .item-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .item-placeholder-icon {
    font-size: 2rem;
  }
</style>
