{% load i18n static %}

<!-- Logos data for popup -->
<div class="quick-view-logos-data" style="display: none !important;" data-logos="true">
  {% if item.brand %}
    <div class="brand-logo-container">
      {% if item.brand.logo_dark and item.brand.logo_dark != "https://www.footballkitarchive.com/static/logos/not_found.png" %}
        <img src="{{ item.brand.logo_dark }}"
             alt="{{ item.brand.name }}"
             class="quick-view-logo"
             onerror="this.onerror=null; this.src='{{ item.brand.logo|default:'' }}';" />
      {% elif item.brand.logo and item.brand.logo != "https://www.footballkitarchive.com/static/logos/not_found.png" %}
        <img src="{{ item.brand.logo }}" alt="{{ item.brand.name }}" class="quick-view-logo" onerror="this.style.display='none'" />
      {% endif %}
    </div>
  {% endif %}
  {% if item.club %}
    <div class="club-shield-container">
      {% if item.club.logo %}
        <img src="{{ item.club.logo }}" alt="{{ item.club.name }}" class="quick-view-shield" onerror="this.style.display='none'" />
      {% endif %}
    </div>
    {% if item.club.country %}
      <span class="fi fi-{{ item.club.country|lower }}" style="font-size: 1.5rem;" title="{{ item.club.country }}"></span>
    {% endif %}
  {% endif %}
  <!-- Empty comment to ensure div is not empty -->
</div>
<!-- End logos data -->
<div class="quick-view-content">
  {% if photos %}
    <div class="mb-3">
      <img src="{{ photos.0.get_image_url }}"
           alt="{{ item.name }}"
           class="img-fluid rounded"
           style="max-height: 300px;
                  width: 100%;
                  object-fit: contain" />
    </div>
  {% endif %}
  <h5 class="mb-2">{{ item.name }}</h5>
  <div class="mb-3">
    {% if specific_item.kit and specific_item.kit.type %}
      <div class="mb-2">
        {% if specific_item.kit.type.category != "match" %}
          <span class="badge bg-primary me-1">{{ specific_item.kit.type.get_category_display_name }}</span>
        {% endif %}
        {% if specific_item.kit.type.is_goalkeeper %}<span class="badge bg-warning text-dark me-1">GK</span>{% endif %}
        <span class="badge bg-secondary">{{ specific_item.kit.type.name }}</span>
      </div>
    {% endif %}
    <div class="small text-muted mb-2">
      {% if item.club %}
        <div>
          <strong>{% trans "Club" %}:</strong> {{ item.club.name }}
        </div>
      {% endif %}
      {% if item.brand %}
        <div>
          <strong>{% trans "Brand" %}:</strong> {{ item.brand.name }}
        </div>
      {% endif %}
      {% if item.season %}
        <div>
          <strong>{% trans "Season" %}:</strong> {{ item.season.year }}
        </div>
      {% endif %}
      {% if specific_item.size %}
        <div>
          <strong>{% trans "Size" %}:</strong> {{ specific_item.size.name }}
        </div>
      {% endif %}
      {% if specific_item.player_name %}
        <div>
          <strong>{% trans "Player" %}:</strong> {{ specific_item.player_name }}
        </div>
      {% endif %}
      {% if specific_item.number %}
        <div>
          <strong>{% trans "Number" %}:</strong> #{{ specific_item.number }}
        </div>
      {% endif %}
    </div>
  </div>
  <div class="d-flex gap-2">
    <a href="{% url 'collection:item_detail' item.pk %}" class="btn btn-primary btn-sm flex-fill">
      <i class="bi bi-eye"></i> {% trans "View Full Details" %}
    </a>
    <a href="{% url 'collection:item_update' item.pk %}" class="btn btn-outline-secondary btn-sm">
      <i class="bi bi-pencil"></i> {% trans "Edit" %}
    </a>
  </div>
</div>
